{% extends "base.html" %}
{% block content %}

<div class="card">
  <h2>Login</h2>
  <p class="muted">Enter your phone number. We'll send you a one-time password (OTP).</p>

  {% if sms_enabled %}
    <div class="notice success">
      SMS OTP is enabled. Please check your phone.
    </div>
  {% else %}
    <div class="notice warn">
      SMS OTP is not enabled yet (demo mode). OTP will be shown on-screen for testing.
    </div>
  {% endif %}

  <div class="spacer"></div>

  <form method="post" action="/login" class="row">
    <input name="phone" placeholder="Phone e.g. 09066454125" value="{{ phone or '' }}" required />
    <button class="btn btn-primary" type="submit">Send OTP</button>
  </form>

  <div class="spacer"></div>

  {% if demo_otp %}
    <p class="pill">Demo OTP: <b>{{ demo_otp }}</b></p>
  {% endif %}

  <form method="post" action="/verify" class="row">
    <input name="otp" placeholder="Enter OTP" required />
    <button class="btn btn-light" type="submit">Verify</button>
  </form>

  <p class="muted small" style="margin-top:12px;">
    Tip: On Render, set <code>TERMII_API_KEY</code> and <code>TERMII_SENDER_ID</code> in Environment Variables to enable real SMS.
  </p>
</div>

{% endblock %}
